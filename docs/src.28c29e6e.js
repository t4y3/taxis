parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"qKzp":[function(require,module,exports) {
"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function t(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function r(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}function i(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&p(n,e)}function o(n){var e=u();return function(){var t,r=h(n);if(e){var i=h(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function s(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function l(n){var e="function"==typeof Map?new Map:void 0;return(l=function(n){if(null===n||!d(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(n))return e.get(n);e.set(n,t)}function t(){return c(n,arguments,h(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),p(t,n)})(n)}function c(n,e,t){return(c=u()?Reflect.construct:function(n,e,t){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(n,r));return t&&p(i,t.prototype),i}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function d(n){return-1!==Function.toString.call(n).indexOf("[native code]")}function p(n,e){return(p=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function h(n){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TaxisTimeline=void 0;var v=function(n){i(a,l(HTMLElement));var t=o(a);function a(n,r){var i,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e(this,a),(i=t.call(this)).editing=!1,i.attachShadow({mode:"open"}),i.axes=n,i.totalTime=r,i.debug=o,i.shadowRoot.innerHTML=i.template(n,r),i.$pane=i.shadowRoot.querySelector("#pane"),i.$timeline=i.shadowRoot.querySelector("#timeline"),i.$current=i.shadowRoot.querySelector("#current"),i.$progress=i.shadowRoot.querySelector("#progress"),i.$labels=i.shadowRoot.querySelectorAll(".label"),i.$bars=i.shadowRoot.querySelectorAll(".bar"),i.$barsBegin=i.shadowRoot.querySelectorAll(".begin"),i.$barsEnd=i.shadowRoot.querySelectorAll(".end"),i.$previous=i.shadowRoot.querySelector("#previous"),i.$playPause=i.shadowRoot.querySelector("#play-pause"),i.$next=i.shadowRoot.querySelector("#next"),i.playing=!0,i.previous=!1,i.next=!1,i.skip=-1,i.$previous.addEventListener("click",function(n){i.previous=!0}),i.$playPause.addEventListener("click",function(n){i.playing=!i.playing}),i.$next.addEventListener("click",function(n){i.next=!0});for(var s=function(n,e){if(i.$bars[n].addEventListener("click",function(n){var e=n.currentTarget,t=Number(e.getAttribute("idx"));i.skip=t}),!i.debug)return"continue";var t=i.$barsBegin[n],r=i.$barsEnd[n];t.addEventListener("input",function(e){var r=Number(t.value);if(Number(i.$barsEnd[n].value)<r)e.preventDefault();else if(Number.isFinite(i.axes[n].position))i.axes[n].position=r,i.axes[n].duration=i.axes[n].endAt-(i.axes[n].delay+i.axes[n].position);else{var o=i.axes.find(function(e){return e.key===i.axes[n].position});i.axes[n].delay=r-o.endAt,i.axes[n].duration=i.axes[n].endAt-(i.axes[n].delay+o.endAt)}}),r.addEventListener("input",function(e){var t=Number(r.value);if(t<Number(i.$barsBegin[n].value))e.preventDefault();else if(Number.isFinite(i.axes[n].position))i.axes[n].duration=t-(i.axes[n].position+i.axes[n].delay);else{var o=i.axes.find(function(e){return e.key===i.axes[n].position});i.axes[n].duration=t-o.endAt-i.axes[n].delay}})},l=0,c=i.$bars.length;l<c;l++)s(l);return i.$labels.forEach(function(n){n.addEventListener("click",function(n){var e=n.currentTarget,t=Number(e.getAttribute("idx"));i.skip=t})}),i.$current.addEventListener("input",function(n){i.editing=!0;var e=Number(i.$current.value);i.__updateProgressPosition(e),i.__updateBar(i.totalTime)}),i.$current.addEventListener("change",function(n){i.editing=!1}),i}return r(a,[{key:"attributeChangedCallback",value:function(){}},{key:"connectedCallback",value:function(){}},{key:"disconnectedCallback",value:function(){}},{key:"getAxes",value:function(){return this.axes}},{key:"get",value:function(n){var e=Date.now(),t=Number(this.$current.value),r=e-n;if(this.playing||(n=e-t,r=t),this.editing&&(n=e-t,r=t),-1<this.skip){var i=this.axes[this.skip];n=e-i.beginAt,r=i.beginAt,this.skip=-1}return this.previous&&(this.previous=!1,n=e,r=0),this.next&&(this.next=!1,n=e-this.totalTime,r=this.totalTime),{beginAt:n,elapsedTime:r,editing:this.editing}}},{key:"update",value:function(n,e,t){this.axes=t,this.totalTime=e,this.$current.setAttribute("max",e),this.$current.value=n,this.__updateProgressPosition(n),this.__updateBar(e),this.debug&&this.__updateBarRange(e),this.__updateScale(e)}},{key:"template",value:function(n,e){for(var t="",r="",i="",o=0;o<n.length;o++){var a=n[o];t+='<div class="row" id="row-'.concat(o,'"><div class="label" idx="').concat(o,'">').concat(a.key,"</div></div>");var s="";this.debug&&(s='\n          <input class="begin" type="range" min="0" max="0" step="10" value="'.concat(a.beginAt,'">\n          <input class="end" type="range" min="0" max="0" step="10" value="').concat(a.endAt,'">\n        ')),r+='\n        <div class="row">\n          <div class="bar bar--'.concat(this.debug?"debug":"default",'" idx="').concat(o,'"></div>\n          ').concat(s,"\n        </div>"),this.debug}for(var l=0,c=Math.floor(e/1e3);l<c;l++)i+='<div class="scale-label" style="--sec: '.concat(l+1,'">').concat(l+1,"s</div>");return'\n      <style>\n        * {\n          box-sizing: border-box;\n        }\n        :host {\n          display: block;\n          height: 100%;\n        }\n        .container {\n          display: flex;\n          flex-direction: column;\n          height: 100%;\n          background-color: #313131;\n          color: #eeeeee;\n          position: relative;\n          --tools-height: 40px;\n          --controls-height: 40px;\n        }\n        .tools {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n          height: var(--tools-height);\n          border-bottom: 1px solid #202020;\n        }\n        .tools__item {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 20px;\n          margin: 0 8px;\n          color: #eeeeee;\n        }\n        .tools__item div {\n          width: 100%;\n          cursor: pointer;\n        }\n        .tools__item div:hover {\n          opacity: .6;\n        }\n        .tools__item svg {\n          fill: currentColor;\n        }\n        .controls {\n          display: flex;\n          flex-shrink: 0;\n          height: var(--controls-height);\n          border-bottom: 1px solid #202020;\n        }\n        .pane {\n          display: flex;\n          flex: 1;\n          overflow: scroll;\n          scroll-behavior: smooth;\n        }\n        .head {\n          flex-shrink: 0;\n          flex-basis: 20%;\n          max-width: 200px;\n          min-width: 0;\n        }\n        .body {\n          flex: 1;\n          position: relative;\n        }\n        .actions {\n          height: 100%;\n          border-right: 1px solid #222322;\n        }\n        .rows {\n          border-right: 1px solid #222322;\n        }\n        .row {\n          display: flex;\n          align-items: center;\n          height: 24px;\n          border-bottom: 1px solid #202020;\n          position: relative;\n        }\n        .row input[type="range"] {\n          position: absolute;\n          inset: 0;\n        }\n        .label {\n          padding-left: 12px;\n          font-size: 12px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          cursor: pointer;\n        }\n        .bar {\n          height: 100%;\n          background-color: #545454;\n          opacity: .5;\n          transform-origin: left;\n          cursor: pointer;\n          position: relative;\n        }\n        .bar.bar--debug::before {\n          content: "";\n          display: block;\n          width: 6px;\n          position: absolute;\n          left: 0;\n          top: 0;\n          bottom: 0;\n          margin: 4px;\n          border-radius: 2px;\n          background-color: darkgray;\n        }\n        .bar.bar--debug::after {\n          content: "";\n          display: block;\n          width: 6px;\n          position: absolute;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          margin: 4px;\n          border-radius: 2px;\n          background-color: darkgray;\n        }\n        .bar.bar--active {\n          opacity: 1;\n        }\n        .progress {\n          position: absolute;\n          top: var(--tools-height);\n          bottom: 0;\n          left: 0;\n          width: 2px;\n          margin-left: min(20%, 200px);\n          background-color: #71A0EB;\n          opacity: 0.6;\n        }\n        .progress::before {\n          content: "";\n          display: block;\n          width: 20px;\n          height: 30px;\n          background-color: #53aeff;\n          margin-left: -9px;\n        }\n        .progress::after {\n          content: "";\n          display: block;\n          border-top: 10px solid #53aeff;\n          border-left: 10px solid transparent;\n          border-right: 10px solid transparent;\n          margin-left: -9px;\n        }\n        .current {\n          position: absolute;\n          top: var(--tools-height);\n          height: var(--controls-height);\n          left: -12px;\n          right: -12px;\n          margin-left: min(20%, 200px);\n        }\n        input[type="range"] {\n          -webkit-appearance: none;\n          appearance: none;\n          margin: 0;\n          cursor: pointer;\n          outline: none;\n        }\n        input[type="range"]::-webkit-slider-thumb {\n          opacity: 0;\n        }\n        input[type="range"]::-moz-range-thumb {\n          opacity: 0;\n        }\n        /* Firefox„ÅßÁÇπÁ∑ö„ÅåÂë®„Çä„Å´Ë°®Á§∫„Åï„Çå„Å¶„Åó„Åæ„ÅÜÂïèÈ°å„ÅÆËß£Ê∂à */\n        input[type="range"]::-moz-focus-outer {\n          border: 0;\n        }\n        .current input[type="range"] {\n          height: var(--controls-height);\n          width: 100%;\n          background: transparent;\n        }\n        input.begin[type="range"],\n        input.end[type="range"] {\n          height: 100%;\n          width: calc(100% + 12px);\n          background: transparent;\n          pointer-events: none;\n          margin-left: -6px;\n        }\n        input.begin[type="range"]::-webkit-slider-thumb,\n        input.end[type="range"]::-webkit-slider-thumb {\n          -webkit-appearance: none;\n          appearance: none;\n          pointer-events: auto;\n          opacity: 0;   \n          width: 12px;\n          height: 100%;\n          cursor: ew-resize;\n        }\n        input.begin[type="range"]::-moz-range-thumb,\n        input.end[type="range"]::-moz-range-thumb {\n          -webkit-appearance: none;\n          appearance: none;\n          pointer-events: auto;\n          opacity: 0;   \n          width: 12px;\n          height: 100%;\n          cursor: ew-resize;\n        }\n        input.begin[type="range"]::-webkit-slider-thumb {\n          background: darkgreen;\n          transform: translateX(50%);\n        }\n        input.begin[type="range"]::-moz-range-thumb {\n          background: darkgreen;\n          transform: translateX(50%);\n        }\n        input.end[type="range"]::-webkit-slider-thumb {\n          background: indianred;\n          transform: translateX(-50%);\n        }\n        input.end[type="range"]::-moz-range-thumb {\n          background: indianred;\n          transform: translateX(-50%);\n        }\n        .scale {\n          position: relative;\n          height: 100%;\n        }\n        .scale-s,\n        .scale-100ms {\n          height: 50%;\n        }\n        .scale-s {\n          /*\n            total / 1s \n            e.g. 6000 / 1000\n            x / 1000 = 6\n            calc(100% / calc(var(--total) / 1000))\n           */\n          --x: calc(100% / calc(var(--total) / 1000));\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n          border-bottom: 1px solid #202020;\n        }\n        .scale-100ms {\n          --x: calc(100% / calc(var(--total) / 1000) / 10);\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n        }\n        .scale-label {\n          --x: calc(100% / calc(var(--total) / 1000));\n          position: absolute;\n          top: 0;\n          left: calc(var(--x) * var(--sec));\n          font-size: 10px;\n          font-style: italic;\n          transform: translateX(calc(-100% - 4px));\n        }\n      </style>\n      <div class="container">\n        <div class="tools">\n          <div class="tools__item">\n            <div id="previous">\n              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M2.75 20C2.75 20.5523 3.19772 21 3.75 21C4.30228 21 4.75 20.5523 4.75 20L4.75 4C4.75 3.44772 4.30229 3 3.75 3C3.19772 3 2.75 3.44772 2.75 4V20Z"/>\n                <path d="M20.75 19.0526C20.75 20.4774 19.1383 21.305 17.9803 20.4748L7.51062 12.9682C6.50574 12.2477 6.54467 10.7407 7.5854 10.073L18.0551 3.35665C19.2198 2.60946 20.75 3.44583 20.75 4.82961L20.75 19.0526Z"/>\n              </svg>\n            </div>\n          </div>\n          <div class="tools__item">\n            <div id="play-pause">\n              <svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                \x3c!-- Generator: Sketch 59.1 (86144) - https://sketch.com --\x3e\n                <title>ic_fluent_video_play_pause_24_filled</title>\n                <desc>Created with Sketch.</desc>\n                <g id="üîç-Product-Icons" stroke="none" stroke-width="1" >\n                    <g id="ic_fluent_video_play_pause_24_filled" fill-rule="nonzero">\n                        <path d="M3.65140982,6.61646219 L11.1528787,11.3693959 C11.3672679,11.5052331 11.4827597,11.722675 11.4993749,11.9464385 L11.4984593,7.25 C11.4984593,6.83578644 11.8342458,6.5 12.2484593,6.5 L15.2484593,6.5 C15.6626729,6.5 15.9984593,6.83578644 15.9984593,7.25 L15.9984593,16.75 C15.9984593,17.1642136 15.6626729,17.5 15.2484593,17.5 L12.2484593,17.5 C11.8342458,17.5 11.4984593,17.1642136 11.4984593,16.75 L11.4993494,12.0597632 C11.4826318,12.2835468 11.3670166,12.5009613 11.1525249,12.6366956 L3.65105604,17.3837618 C3.15168144,17.6997752 2.5,17.3409648 2.5,16.75 L2.5,7.25 C2.5,6.65884683 3.15205264,6.30006928 3.65140982,6.61646219 Z M21.2477085,6.50037474 C21.661922,6.50037474 21.9977085,6.83616118 21.9977085,7.25037474 L21.9977085,16.7496253 C21.9977085,17.1638388 21.661922,17.4996253 21.2477085,17.4996253 L18.2477085,17.4996253 C17.8334949,17.4996253 17.4977085,17.1638388 17.4977085,16.7496253 L17.4977085,7.25037474 C17.4977085,6.83616118 17.8334949,6.50037474 18.2477085,6.50037474 L21.2477085,6.50037474 Z" id="üé®-Color"></path>\n                    </g>\n                </g>\n              </svg>\n            </div>\n          </div>\n          <div class="tools__item">\n            <div id="next">\n              <svg   viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M21 4C21 3.44772 20.5523 3 20 3C19.4477 3 19 3.44772 19 4V20C19 20.5523 19.4477 21 20 21C20.5523 21 21 20.5523 21 20V4Z"/>\n                <path d="M3 4.94743C3 3.5226 4.61175 2.69498 5.7697 3.52521L16.2394 11.0318C17.2443 11.7523 17.2053 13.2593 16.1646 13.927L5.69492 20.6434C4.53019 21.3905 3 20.5542 3 19.1704V4.94743Z"/>\n              </svg>\n            </div>\n          </div>\n        </div>\n        <div class="controls">\n          <div class="head"><div class="actions"></div></div>\n          <div class="body">\n            <div class="scale" id="scale" style="--total: '.concat(e,'">\n              <div class="scale-s"></div>\n              <div class="scale-100ms"></div>\n              ').concat(i,'\n            </div>\n          </div>\n        </div>\n        <div id="pane" class="pane">\n          <div class="head">\n            <div class="rows">\n              ').concat(t,'\n            </div>\n          </div>\n          <div id="timeline" class="body">\n            <div class="rows">\n              ').concat(r,'\n            </div>\n          </div>\n        </div>\n        <div class="current">\n          <input id="current" type="range" min="0" max="0" step="any" value="0">\n        </div>\n        <div id="progress" class="progress"></div>\n      </div>\n    ')}},{key:"__updateScale",value:function(n){var e=this.shadowRoot.querySelector(".test");e&&e.remove(),this.shadowRoot.querySelectorAll(".scale-label").forEach(function(n){n.remove()}),this.shadowRoot.querySelector(".scale").style.setProperty("--total",n);for(var t="",r=0,i=Math.floor(n/1e3);r<i;r++)t+='<div class="scale-label" style="--sec: '.concat(r+1,'">').concat(r+1,"s</div>");var o=document.createElement("div");o.className="test",o.innerHTML=t,this.shadowRoot.querySelector(".scale").appendChild(o)}},{key:"__updateProgressPosition",value:function(n){var e=this.$timeline.clientWidth,t=Math.min(n/this.totalTime,1)*e;this.$progress.style.transform="translateX(".concat(t,"px)")}},{key:"__updateBarRange",value:function(n){for(var e=0;e<this.$bars.length;e++){var t=this.axes[e];this.$barsBegin[e].setAttribute("max",n),this.$barsBegin[e].value=t.beginAt,this.$barsEnd[e].setAttribute("max",n),this.$barsEnd[e].value=t.endAt}}},{key:"__updateBar",value:function(n){for(var e=this.$timeline.clientWidth/n,t=0;t<this.$bars.length;t++){var r=this.axes[t],i=r.beginAt*e,o=(r.endAt-r.beginAt)*e;this.$bars[t].style.transform="translateX(".concat(i,"px)"),this.$bars[t].style.width="".concat(o,"px"),0<r.progress&&!r.pass?this.$bars[t].classList.add("bar--active"):this.$bars[t].classList.remove("bar--active")}}}]),a}();exports.TaxisTimeline=v,window.customElements.define("taxis-timeline",v);
},{}],"amLE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Taxis=void 0;var e=require("./timeline");function t(e){return a(e)||r(e)||n(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}function r(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function a(e){if(Array.isArray(e))return s(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e}var h={key:"",beginAt:0,endAt:0,duration:0,delay:0,position:0,progress:0,enter:!1,pass:!1},c={ENTER:"enter",LEAVE:"leave",PASS:"pass"},f=function(){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,i),this.option=e,this.axes=[]}return l(i,[{key:"totalTime",get:function(){return this.axes.length?Math.max.apply(Math,t(this.axes.map(function(e){return e.endAt}))):0}},{key:"totalTimeForTimeline",get:function(){return this.totalTime+500}},{key:"everyPassed",get:function(){return this.axes.every(function(e){return e.pass})}},{key:"restart",value:function(){this.beginAt=Date.now()}},{key:"getAxis",value:function(e){var t=e.key;return this.axes.find(function(e){return e.key===t})}},{key:"getAxes",value:function(){return this.axes}},{key:"add",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,r=this.totalTime+i;if(void 0!==n){if(Number.isFinite(n))r=n+i;else r=this.getAxis({key:n}).endAt+i}else{var a=this.axes[this.axes.length-1];n=a?a.key:0}return this.axes.push(Object.assign(Object.assign({},h),{key:e,beginAt:r,endAt:r+t,duration:t,delay:i,position:n})),this.sort(),this}},{key:"begin",value:function(){this.option.timeline&&(this.timeline=new e.TaxisTimeline(this.axes,this.totalTimeForTimeline,this.option.timeline.debug),this.option.timeline.container.appendChild(this.timeline)),this.beginAt=Date.now(),this.__tick()}},{key:"reset",value:function(){cancelAnimationFrame(this.requestID)}},{key:"ticker",value:function(e){this.tickerFn=e}},{key:"__tick",value:function(){var e=this.beginAt,t=Date.now()-e,i=!1;if(this.option.timeline){this.axes=this.recalculation(this.timeline.getAxes());var n=this.timeline.get(this.beginAt),r=n.beginAt,a=n.elapsedTime,s=n.editing;e=r,t=a,i=s}this.beginAt=e,this.axes.forEach(function(e,i){var n=t-e.beginAt,r=Math.max(0,Math.min(n/e.duration,1)),a=e.beginAt<=t,s=e.endAt<t;e.progress=r,e.enter=a,e.pass=s}),this.option.timeline&&!i&&this.timeline.update(t,this.totalTimeForTimeline,this.axes),this.tickerFn&&this.tickerFn(t,this.toMap(this.axes)),this.requestID=requestAnimationFrame(this.__tick.bind(this))}},{key:"calculation",value:function(){for(var e=[],i=0;i<this.axes.length;i++){var n=this.axes[i],r=n.key,a=n.duration,s=n.position,o=n.delay,u=Math.max.apply(Math,t(e.map(function(e){return e.endAt})))+o;if(void 0!==s)if(Number.isFinite(s))u=s+o;else u=this.getAxis({key:s}).endAt+o;else s=u;e.push(Object.assign(Object.assign({},h),{key:r,beginAt:u,endAt:u+a,duration:a,delay:o,position:s}))}}},{key:"recalculation",value:function(e){for(var i=[],n=0;n<e.length;n++){var r=e[n],a=r.key,s=r.duration,o=r.position,u=r.delay,l=Math.max.apply(Math,t(i.map(function(e){return e.endAt})))+u;if(void 0!==o)if(Number.isFinite(o))l=o+u;else l=this.getAxis({key:o}).endAt+u;else o=l;i.push(Object.assign(Object.assign({},h),{key:a,beginAt:l,endAt:l+s,duration:s,delay:u,position:o}))}return i}},{key:"sort",value:function(){this.axes.sort(function(e,t){return e.beginAt-t.beginAt})}},{key:"toMap",value:function(e){var t=new Map;return e.forEach(function(e){t[e.key]=e,t.set(e.key,e)}),t}}]),i}();exports.Taxis=f;
},{"./timeline":"qKzp"}],"lWZA":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function i(e){var t=l();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?u(t):n}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||!f(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return s(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)})(e)}function s(e,t,n){return(s=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&p(o,n.prototype),o}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function f(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TaxisDemo=void 0;var d=function(e){o(c,a(HTMLElement));var n=i(c);function c(){var e;return t(this,c),(e=n.call(this)).attachShadow({mode:"open"}),e.isIntersecting=!1,e.shadowRoot.innerHTML=e.template(),e.$boxes=e.shadowRoot.querySelectorAll(".box"),e.$timeline=e.shadowRoot.querySelector(".timeline"),e}return r(c,[{key:"attributeChangedCallback",value:function(){}},{key:"connectedCallback",value:function(){var e=this;setTimeout(function(){e.resizeObserver=new ResizeObserver(e.handleResize.bind(e)),e.resizeObserver.observe(e),e.beginAt=Date.now()},0)}},{key:"disconnectedCallback",value:function(){cancelAnimationFrame(this.requestID),this.resizeObserver.unobserve(this)}},{key:"handleResize",value:function(e){var t=e[0].contentRect,n=t.width;t.height;this.width=n}},{key:"template",value:function(){return'\n      <style>\n        :host {\n          display: block;\n          width: 100%;\n        }\n        .container {\n        }\n        .box {\n          width: 60px;\n          height: 60px;\n          border-radius: 2px;\n          margin-bottom: 20px;\n          background: linear-gradient(135deg, #545454, #333);\n        }\n        .box:last-child {\n          margin-bottom: 0;\n        }\n        .timeline {\n          margin-top: 20px;\n          height: 200px;\n        }\n        img {\n          width: 100%;\n          margin-top: 12px;\n        }\n      </style>\n      <div class="container">\n        <div class="wrap">\n          <div class="box"></div>\n          <div class="box"></div>\n          <div class="box"></div>\n        </div>\n        <div class="timeline"></div>\n        <img src="https://user-images.githubusercontent.com/9010553/111905765-b2864600-8a90-11eb-92e3-8bbe8927c2d7.png" alt="">\n      </div>\n    '}},{key:"start",value:function(e){e(this.ticker.bind(this))}},{key:"ticker",value:function(e){var t=this;this.$boxes.forEach(function(n,r){n.style.transform="translateX(".concat(e[r]*(t.width-60),"px)")})}},{key:"render",value:function(){this.requestID=requestAnimationFrame(this.render.bind(this))}}]),c}();exports.TaxisDemo=d,window.customElements.define("taxis-demo",d);
},{}],"7QCb":[function(require,module,exports) {
"use strict";var e=require("../../src/taxis"),i=require("./taxis-demo");window.addEventListener("DOMContentLoaded",function(){var n=new i.TaxisDemo,t=new e.Taxis({timeline:{container:n.$timeline,debug:!0}});n.start(function(e){t.add("box#01",3e3,0).add("box#02",3e3,-300).add("box#03",3e3,-300),t.begin(),t.ticker(function(i,n){var t=[];n.forEach(function(e){t.push(e.progress)}),e(t)})}),document.querySelector(".timeline").appendChild(n)});
},{"../../src/taxis":"amLE","./taxis-demo":"lWZA"}]},{},["7QCb"], null)
//# sourceMappingURL=/taxis/src.28c29e6e.js.map